<html><head>
<style>
.menu {
       height: 100%;
       width: 160px;
       position: fixed; /* Фиксированная боковая панель (оставайтесь на месте при прокрутке) */
       /*background-color: #111;  Черный */
      }
 .menu a {
  padding: 6px 8px 6px 16px;
  text-decoration: none;
  font-size: 15px;
  color: #818181;
  display: block;
          }     
.content {
           margin-left: 160px; /* То же, что и ширина боковой панели */
         }
</style>
</head><body>
<title>Код</title>
<div class="menu">
<a href="#gazon.urdf">urdf/gazon.urdf</a><br>
<a href="#yaml">config/gazon.yaml</a><br>
<a href="#gazebo.launch">launch/gazebo.launch</a><br>
</div>
<div class="content">
<h3 align=center><a name="gazon.urdf">urdf/gazon.urdf</h3>
<pre>
&lt;?xml version="1.0"?&gt;
&lt;robot name="gazonchik"&gt;

   &lt;material name="black"&gt;
     &lt;color rgba="0 0 0 1"/&gt;
   &lt;/material&gt;

   &lt;material name="grey"&gt;
     &lt;color rgba="0.5 0.5 0.5 1"/&gt;
   &lt;/material&gt;

   &lt;link name="base_link"&gt;
      &lt;visual&gt;
        &lt;geometry&gt;
          &lt;box size="0.6 0.4 0.1"/&gt;
        &lt;/geometry&gt;
        &lt;material name="grey"/&gt;
        &lt;origin xyz="0 0 0.06" rpy="0 0 0"/&gt;
      &lt;/visual&gt;
      &lt;collision&gt;
        &lt;geometry&gt;
          &lt;box size="0.6 0.4 0.1"/&gt;
        &lt;/geometry&gt;
        &lt;origin xyz="0 0 0.11" rpy="0 0 0"/&gt;
      &lt;/collision&gt;
      &lt;inertial&gt;
        &lt;origin xyz="0.0 0 0."/&gt;
        &lt;mass value="0.5"/&gt; 
        &lt;inertia ixx="0.01" ixy="0.0" ixz="0.0"
                 iyy="0.01" iyz="0.0" 
                 izz="0.03" /&gt;
      &lt;/inertial&gt;
   &lt;/link&gt;
     &lt;gazebo reference="base_link"&gt;
        &lt;material&gt;Gazebo/Grey&lt;/material&gt;
     &lt;/gazebo&gt;

   &lt;!-- блок переднего правого колёса --&gt;
   &lt;link name="front_right_wheel"&gt;
      &lt;visual&gt;
       &lt;geometry&gt;
         &lt;cylinder length="0.05" radius="0.06"/&gt;
       &lt;/geometry&gt;
       &lt;origin rpy="1.57075 0 0" xyz="0 0 0"/&gt;
       &lt;material name="black"/&gt;
      &lt;/visual&gt;
      &lt;collision&gt;
         &lt;geometry&gt;
            &lt;cylinder length="0.05" radius="0.06"/&gt;
         &lt;/geometry&gt;
      &lt;origin rpy="1.57075 0 0" xyz="0 0 0"/&gt;
      &lt;/collision&gt;
      &lt;inertial&gt;
        &lt;mass value="0.4" /&gt;
        &lt;origin xyz="0 0 0" /&gt;
        &lt;inertia ixx="0.001" ixy="0.0" ixz="0.0"
                 iyy="0.001" iyz="0.0" 
                 izz="0.001" /&gt;
      &lt;/inertial&gt;
   &lt;/link&gt;
   &lt;!--цвет  правого переднего колёса--&gt; 
    &lt;gazebo reference="front_right_wheel"&gt;
       &lt;mu1 value="200.0"/&gt;
       &lt;mu2 value="100.0"/&gt;
       &lt;kp value="10000000.0" /&gt;
       &lt;kd value="1.0" /&gt;
       &lt;material&gt;Gazebo/Black&lt;/material&gt;
    &lt;/gazebo&gt;
   
   &lt;link name="front_left_wheel"&gt;
      &lt;visual&gt;
        &lt;geometry&gt;
          &lt;cylinder length="0.05" radius="0.06"/&gt;
        &lt;/geometry&gt;
        &lt;origin rpy="1.57075 0 0" xyz="0 0 0"/&gt;
       &lt;material name="black"/&gt;
      &lt;/visual&gt;
      &lt;collision&gt;
        &lt;geometry&gt;
           &lt;cylinder length="0.05" radius="0.06"/&gt;
        &lt;/geometry&gt;
        &lt;origin rpy="1.57075 0 0" xyz="0 0 0"/&gt;     
      &lt;/collision&gt;
      &lt;inertial&gt;
        &lt;mass value="0.4" /&gt;
        &lt;origin xyz="0 0 0" /&gt;
        &lt;inertia ixx="0.001" ixy="0.0" ixz="0.0"
                 iyy="0.001" iyz="0.0" 
                 izz="0.001" /&gt;
      &lt;/inertial&gt;
   &lt;/link&gt;
    &lt;gazebo reference="front_left_wheel"&gt;
       &lt;mu1 value="200.0"/&gt;
       &lt;mu2 value="100.0"/&gt;
       &lt;kp value="10000000.0" /&gt;
       &lt;kd value="1.0" /&gt;
       &lt;material&gt;Gazebo/Black&lt;/material&gt;
     &lt;/gazebo&gt; 
  
   &lt;link name="back_left_wheel"&gt;
       &lt;visual&gt;
         &lt;geometry&gt;
           &lt;cylinder length="0.05" radius="0.06"/&gt;
         &lt;/geometry&gt;
         &lt;origin rpy="1.57075 0 0" xyz="0 0 0"/&gt;
         &lt;material name="black"/&gt;
       &lt;/visual&gt;
       &lt;collision&gt;
         &lt;geometry&gt;
            &lt;cylinder length="0.05" radius="0.06"/&gt;
         &lt;/geometry&gt;
         &lt;origin rpy="1.57075 0 0" xyz="0 0 0"/&gt;
      &lt;/collision&gt;
      &lt;inertial&gt;
        &lt;mass value="0.4" /&gt;
        &lt;origin xyz="0 0 0" /&gt;
        &lt;inertia ixx="0.001" ixy="0.0" ixz="0.0"
                 iyy="0.001" iyz="0.0" 
                 izz="0.001" /&gt;
      &lt;/inertial&gt;
   &lt;/link&gt;
    &lt;gazebo reference="back_left_wheel"&gt;
       &lt;mu1 value="200.0"/&gt;
       &lt;mu2 value="100.0"/&gt;
       &lt;kp value="10000000.0" /&gt;
       &lt;kd value="1.0" /&gt;
       &lt;material&gt;Gazebo/Black&lt;/material&gt;
    &lt;/gazebo&gt;

   &lt;link name="back_right_wheel"&gt;
       &lt;visual&gt;
         &lt;geometry&gt;
           &lt;cylinder length="0.05" radius="0.06"/&gt;
         &lt;/geometry&gt;
         &lt;origin rpy="1.57075 0 0" xyz="0 0 0"/&gt;
         &lt;material name="black"/&gt;
       &lt;/visual&gt;
      &lt;collision&gt;
         &lt;geometry&gt;
            &lt;cylinder length="0.05" radius="0"/&gt;
         &lt;/geometry&gt;
         &lt;origin rpy="1.57075 0 0" xyz="0 0 0"/&gt;
      &lt;/collision&gt;
      &lt;inertial&gt;
        &lt;mass value="0.4" /&gt;
        &lt;origin xyz="0 0 0" /&gt;
        &lt;inertia ixx="0.001" ixy="0.0" ixz="0.0"
                 iyy="0.001" iyz="0.0" 
                 izz="0.001" /&gt;
      &lt;/inertial&gt;
   &lt;/link&gt;
    &lt;gazebo reference="back_right_wheel"&gt;
        &lt;mu1 value="200.0"/&gt;
        &lt;mu2 value="100.0"/&gt;
        &lt;kp value="10000000.0" /&gt;
        &lt;kd value="1.0" /&gt;
        &lt;material&gt;Gazebo/Black&lt;/material&gt;
    &lt;/gazebo&gt;
   
   &lt;joint name="front_right_wheel_to_base" type="revolute"&gt;
       &lt;parent link="base_link"/&gt;
       &lt;child link="front_right_wheel"/&gt;
       &lt;origin xyz="0.3 -0.2 0"/&gt;
       &lt;axis xyz="0 0 1"/&gt;
       &lt;limit lower="-0.785" upper="0.785" effort="1000" velocity="1"/&gt;
   &lt;/joint&gt;

   &lt;joint name="front_left_wheel_to_base" type="revolute"&gt;
       &lt;parent link="base_link"/&gt;
       &lt;child link="front_left_wheel"/&gt;
       &lt;origin xyz="0.3 0.2 0"/&gt;
       &lt;axis xyz="0 0 1"/&gt;
       &lt;limit lower="-0.785" upper="0.785" effort="1000" velocity="1"/&gt;
   &lt;/joint&gt;

   &lt;joint name="back_right_wheel_to_base" type="continuous"&gt;
       &lt;parent link="base_link"/&gt;
       &lt;child link="back_right_wheel"/&gt;
       &lt;origin xyz="-0.3 -0.2 0"/&gt;
       &lt;axis xyz="0 0 1"/&gt;
   &lt;/joint&gt;

   &lt;joint name="back_left_wheel_to_base" type="continuous"&gt;
       &lt;parent link="base_link"/&gt;
       &lt;child link="back_left_wheel"/&gt;
       &lt;origin xyz="-0.3 0.2 0"/&gt;
       &lt;axis xyz="0 0 1"/&gt;
   &lt;/joint&gt;

   &lt;transmission name="front_right_wheel_trans"&gt;
       &lt;type&gt;transmission_interface/SimpleTransmission&lt;/type&gt;
       &lt;actuator name="front_right_motor"&gt;
          &lt;mechanicalReduction&gt;1&lt;/mechanicalReduction&gt;
       &lt;/actuator&gt;
       &lt;joint name="front_right_wheel_to_base"&gt;
          &lt;hardwareInterface&gt;hardware_interface/VelocityJointInterface&lt;/hardwareInterface&gt;
       &lt;/joint&gt;
   &lt;/transmission&gt;
 
   &lt;transmission name="front_left_wheel_trans"&gt;
       &lt;type&gt;transmission_interface/SimpleTransmission&lt;/type&gt;
       &lt;actuator name="front_left_motor"&gt;
          &lt;mechanicalReduction&gt;1&lt;/mechanicalReduction&gt;
       &lt;/actuator&gt;
       &lt;joint name="front_left_wheel_to_base"&gt;
          &lt;hardwareInterface&gt;hardware_interface/VelocityJointInterface&lt;/hardwareInterface&gt;
       &lt;/joint&gt;
   &lt;/transmission&gt;
   &lt;!-- Добавляем плагин, чтобы могли взаимодействовать с нашим роботом --&gt;
   &lt;gazebo&gt;
      &lt;plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so"&gt;
        &lt;robotNamespace&gt;gazonchik&lt;/robotNamespace&gt;
      &lt;/plugin&gt;
   &lt;/gazebo&gt;

&lt;/robot&gt;
</pre>


<h3 align=center><a name="yaml">config/gazon.yaml</h3>
Контроллеры для робота gazon.
<pre>
#скопировано из конф. файла Антона (https://github.com/AntonSHBK/mobile_robot_base_ros1/blob/main/config/robot_joint_state.yaml),
# только прокомментирую блоки камеры и задних колёс и изменю названия суставов на мои.
# Контроллер состояния суставов, который публикует состояние всех суставов в роботе
joint_state_controller:
  type: "joint_state_controller/JointStateController"  # Тип контроллера, отвечающий за сбор и публикацию данных о состоянии сустав>
  publish_rate: 50  # Частота публикации данных о состоянии суставов в герцах

# Контроллер позиции для управления камерой
#camera_controller:
#  type: "position_controllers/JointPositionController"  # Тип контроллера, отвечающий за управление позицией сустава
#  joint: camera_joint  # Сустав, которым управляет данный контроллер

# Контроллеры скорости для управления колёсами
# Каждый контроллер управляет одним колесом

# Контроллер для переднего левого колеса
front_left_wheel_controller:
  type: "velocity_controllers/JointVelocityController"  # Контроллер управляет скоростью вращения сустава
  joint: front_left_wheel_to_base  # Сустав переднего левого колеса

# Контроллер для переднего правого колеса
front_right_wheel_controller:
  type: "velocity_controllers/JointVelocityController"
  joint: front_right_wheel_to_base  # Сустав переднего правого колеса

# Контроллер для заднего левого колеса
#back_left_wheel_controller:
#  type: "velocity_controllers/JointVelocityController"
#  joint: back_left_wheel_joint  # Сустав заднего левого колеса

# Контроллер для заднего правого колеса
#back_right_wheel_controller:
#  type: "velocity_controllers/JointVelocityController"
#  joint: back_right_wheel_joint  # Сустав заднего правого колеса
</pre> 


<h3 align=center><a name="gazebo.launch">Код launch/gazebo.launch</h3>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;launch&gt;
    &lt;!-- Запуск RViz --&gt;
    &lt;include file="$(find myrobot_description)/launch/rviz.launch"/&gt;

    &lt;!-- Загрузим в сервер параметров настройки контроллеров из конфигурационных файлов.yaml --&gt;
    &lt;rosparam file="$(find myrobot_description)/config/gazon.yaml" command="load"/&gt;

    &lt;!-- Загрузим в сервер параметров описание робота .urdf ------------------------------- --&gt;
    &lt;param name="robot_description" command="cat '$(find myrobot_description)/urdf/gazon.urdf'" /&gt;
        &lt;arg name="x" default="0"/&gt;  &lt;!-- начальные координаты робота в симуляторе --&gt;
        &lt;arg name="y" default="0"/&gt;
        &lt;arg name="z" default="0"/&gt;

    &lt;!-- Загрузим карту местности в газебо--------------------- --&gt;
    &lt;include file="$(find gazebo_ros)/launch/empty_world.launch" /&gt;

    &lt;!-- Выполним питон скрипт, чтобы создать gazebo_ros создал urdf файл моей модели  --&gt;
    &lt;!-- Так как у меня с самого начала urdf файл, то возможно этот блок не нужен. Закомментирую. --&gt;
    &lt;!-- &lt;node name="mybot_spawn" pkg="gazebo_ros" type="spawn_model" output="screen" 
          args="-urdf -param robot_description -model gazonchik -x $(arg x) -y $(arg y) -z $(arg z)" /&gt; --&gt;

    &lt;!-- Загрузим контроллеры --&gt;
    &lt;!-- The args point to the configuration from the loaded file (load.yml), 
         and define their names, allowing to build a hierarchical structure --&gt;
    &lt;node name="robot_base_controllers_spawner" 
      pkg="controller_manager" 
      type="spawner"
      respawn="false" 
      output="screen" 
      args="
           joint_state_controller
           &lt;!-- camera_controller --&gt;

           front_left_wheel_controller
           front_right_wheel_controller" /&gt;

           &lt;!-- back_left_wheel_controller
                back_right_wheel_controller"/&gt; --&gt;


&lt;/launch&gt;
</pre>
 
</div> 
 <br><br><br><br><br></body></html>
