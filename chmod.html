<html><head></head><body>
<title>Система прав доступа на файл в linux</title>
Ссылки: <a href="https://losst.pro/prava-dostupa-k-fajlam-v-linux">Права доступа к файлам в Linux</a>
<p>
<h2 align=center>Основные права доступа к файлам в Linux</h2>
<h3>Как посмотреть права доступа к файлам в Linux</h3>
Посмотреть права доступа, атрибуты файла можно с помощью команды: <i>ls -l</i><br>
<img src="./images/chmod.png">
<p>
Первый символ указывает каталог или файл, если файл, то его тип. Далее с 2 по 4 права для владельца, 5-7 права для группы и 8-10 для всех остальных.<br>
Рассмотрим подробнее, что значат условные значения флагов прав:
<ul>
<li> <b>-</b>  нет прав;
<li> x - разрешено право на выполнение файла;
<li> r - чтение; разрешает получать содержимое файла, но на запись нет. Для каталога позволяет получить список файлов и каталогов, расположенных в нем;
<li> w - запись; разрешает записывать новые данные в файл или изменять существующие, а также позволяет создавать и изменять файлы и каталоги
<li> s - установлен SUID или SGID бит;
<li> t - установлен sticky-bit, а значит пользователи не могут удалить этот файл.
</ul>
Все эти права были бы бессмысленными, если бы применялись сразу для всех пользователей. Поэтому каждый файл имеет три категории пользователей, для которых можно устанавливать различные сочетания прав доступа:
<ul>
<li> Владелец - набор прав для владельца файла, пользователя, который его создал или сейчас установлен его владельцем. Обычно владелец имеет все права, чтение, запись и выполнение.
<li> Группа - любая группа пользователей, существующая в системе и привязанная к файлу. Но это может быть только одна группа и обычно это группа владельца, хотя для файла можно назначить и другую группу.
<li> Остальные - все пользователи, кроме владельца и пользователей, входящих в группу файла.
</ul>
Именно с помощью этих наборов полномочий устанавливаются права файлов в linux. Каждый пользователь может получить полный доступ только к файлам, владельцем которых он является или к тем, доступ к которым ему разрешен. Только пользователь Root может работать со всеми файлами независимо от их набора их полномочий.
<p>
Но со временем такой системы стало не хватать и было добавлено еще несколько флагов, которые позволяют делать файлы не изменяемыми или же выполнять от имени суперпользователя, их мы рассмотрим ниже:

<h3>Специальные права доступа к файлам в Linux</h3>
Для того, чтобы позволить обычным пользователям выполнять программы от имени суперпользователя без знания его пароля была придумана такая вещь, как SUID и SGID биты. Рассмотрим эти полномочия подробнее.
<ul>
<li> SUID - если этот бит установлен, то при выполнении программы, id пользователя, от которого она запущена заменяется на id владельца файла. Фактически, это позволяет обычным пользователям запускать программы от имени суперпользователя;
<li> SGID - этот флаг работает аналогичным образом, только разница в том, что пользователь считается членом группы, с которой связан файл, а не групп, к которым он действительно принадлежит. Если SGID флаг установлен на каталог, все файлы, созданные в нем, будут связаны с группой каталога, а не пользователя. Такое поведение используется для организации общих папок;
<li> Sticky-bit - этот бит тоже используется для создания общих папок. Если он установлен, то пользователи могут только создавать, читать и выполнять файлы, но не могут удалять файлы, принадлежащие другим пользователям.
</ul>
Теперь давайте рассмотрим как изменить права на файлы в Linux.


<h3>Как изменить права файла в Linux</h3>
Чтобы изменить права на файл в linux вы можете использовать утилиту chmod. Она позволяет менять все флаги, включая специальные.<br>
 Рассмотрим ее синтаксис:
<p>
<font color=green>chmod опции</font> <font color=red>категория</font><font color=blue>действие</font><font color=green>флаг файл</font>
<p>
Опции сейчас нас интересовать не будут, разве что только одна. С помощью опции -R вы можете заставить программу применять изменения ко всем файлам и каталогам рекурсивно.
<p>
<font color=red>Категория</font> указывает для какой группы пользователей нужно применять права, как вы помните доступно только три категории:
<ul>
<li> u - владелец файла;
<li> g - группа файла;
<li> o - другие пользователи.
</ul>
<font color=blue>Действие</font> может быть одно из двух, либо добавить - знак "+", либо убрать - знак "-". Что касается самих прав доступа, то они аналогичны выводу утилиты ls: r - чтение, w - запись, x - выполнение, s - suid/sgid, в зависимости от категории, для которой вы его устанавливаете, t - устанавливает sticky-bit.<br>
Пример, всем пользователям полный доступ к файлу test5:<br>
 chmod ugo+rwx test5
<p>
Или заберем все права у группы и остальных пользователей:<br>
 chmod go-rwx test5
<p>
Дадим группе право на чтение и выполнение:<br>
chmod g+rx test5
<p>
Остальным пользователям только чтение:<br>
chmod o+r test5
<p>
Как видите, изменить права на файл в Linux очень просто. К тому же вы можете изменить основные права с помощью файлового менеджера.


<h3 align="center"><a href="https://losst.pro/gruppy-polzovatelej-linux">Группы пользователей Linux</a></h3>
Список групп находится в файле /etc/group. Чтобы просмотреть его, команда:<br>
<b>cat /etc/group</b>
<ul>
<li> daemon - от имени этой группы и пользователя daemon запускаютcя сервисы, которым необходима возможность записи файлов на диск.
<li> sys - группа открывает доступ к исходникам ядра и файлам include сохраненным в системе
<li> sync - позволяет выполнять команду /bin/sync
<li> games - разрешает играм записывать свои файлы настроек и историю в определенную папку
<li> man - позволяет добавлять страницы в директорию /var/cache/man
<li> lp - позволяет использовать устройства параллельных портов
<li> mail - позволяет записывать данные в почтовые ящики /var/mail/
<li> proxy - используется прокси серверами, нет доступа записи файлов на диск
<li> www-data - с этой группой запускается веб-сервер, она дает доступ на запись /var/www, где находятся файлы веб-документов
<li> list - позволяет просматривать сообщения в /var/mail
<li> nogroup - используется для процессов, которые не могут создавать файлов на жестком диске, а только читать, обычно применяется вместе с пользователем nobody.
<li> adm - позволяет читать логи из директории /var/log
<li> tty - все устройства /dev/vca разрешают доступ на чтение и запись пользователям из этой группы
<li> disk - открывает доступ к жестким дискам /dev/sd* /dev/hd*, можно сказать, что это аналог рут доступа.
<li> dialout - полный доступ к серийному порту
<li> cdrom - доступ к CD-ROM
<li> wheel - позволяет запускать утилиту sudo для повышения привилегий
<li> audio - управление аудиодрайвером
<li> src - полный доступ к исходникам в каталоге /usr/src/
<li> shadow - разрешает чтение файла /etc/shadow
<li> utmp - разрешает запись в файлы /var/log/utmp /var/log/wtmp
<li> video - позволяет работать с видеодрайвером
<li> plugdev - позволяет монтировать внешние устройства USB, CD и т д
<li> staff - разрешает запись в папку /usr/local
</ul>
<p>
Управление группами Linux для пользователя выполняется с помощью команды usermod.<br>
Синтаксис:<br>
usermod опции имя_пользователя
<p>
Опции:<br>
-G - дополнительные группы, в которые нужно добавить пользователя<br>
-g изменить основную группу для пользователя<br>
-R удалить пользователя из группы.
<p>
<b>Добавить пользователя в группу можно командой usermod</b>:<br>
 <b>sudo usermod -a -G</b> имя_группы имя_пользователя
<p>
<b>Посмотреть куда входит Пользователь, можно командой</b>:
<br>
<b>groups</b> Пользователь
<p>
<img src="./images/chmod1.png">
<p>
Также можно использовать команду id. В этом случае дополнительно указанны id группы и пользователя.
<p>
<img src="./images/chmod2.png">
<p>
<b>Чтобы включить Пользователя в группу Linux, для основной группы используется опция -g</b>:<br>
<b>sudo usermod -g</b> группа Пользователь
<p>
<b>Удалить пользователя из группы в linux командой с опцией R</b>:<br>
<b>sudo usermod -R</b> группа пользователь
<p>
<b>удалить группу Linux можно командой:</b><br>
<b>sudo delgroup</b> имя_группы














<br><br><br><br><br><br><br><br></body></html>
