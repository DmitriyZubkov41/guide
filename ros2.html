<html><head></head><body>
<title>ROS 2</title>
<h2 align=center>Установка ROS2</h2>
ROS2 будем изучать и устанавливать на последней версии ros2: Jazzy Jalisco. ROS2 устанавливается на ubuntu версии только 24.04. Если на 20.04, то как предполагаю запускать можно только через контейнер докера.
<p>
<a href="https://docs.ros.org/en/jazzy/Installation.html">Установка Jazzy Jalisco</a>
<p>
Как и для любой другой программы есть два способа установки:
<ul>
<li> с помощью бинарных файлов
<li> и из исходного кода (Building from source).
</ul>
На Ubuntu Linux рекомендуется устанавливать с помощью <a href="https://docs.ros.org/en/jazzy/Installation/Ubuntu-Install-Debians.html">Debian пакетов</a>.
<p>
Установка из бинарных пакетов или из исходного кода приведет к полнофункциональной и удобной для использования установке ROS 2. Различия между вариантами зависят от того, что вы планируете делать с ROS 2.
<p>
Бинарные пакеты предназначены для общего использования и предоставляют уже встроенную установку ROS 2. Это отличный вариант для тех, кто хочет сразу же освоиться и начать использовать ROS 2 как есть.
<p>
У пользователей Linux есть два варианта установки бинарных пакетов:
<ul>
<li> Пакеты (debian (для Ubuntu) или RPMS (для RHEL 9 (Red Hat)), в зависимости от платформы)

<li> двоичный архив
</ul>
Установка из пакетов является рекомендуемым методом, поскольку при этом автоматически устанавливаются необходимые зависимости, а также обновляются вместе с регулярными обновлениями системы. Однако для установки пакетов Debian вам необходим root-доступ. Если у вас нет root-доступа, двоичный архив - это лучший выбор.
<p>
Пользователи Windows, которые выбирают установку из бинарных пакетов, имеют возможность использовать только бинарный архив (пакеты Debian доступны исключительно для Ubuntu/Debian).
<p>
Сборка из исходного кода предназначена для разработчиков, которые хотят изменить или явно исключить некоторые части базы ROS 2. Также рекомендуется для платформ, которые не поддерживают бинарные файлы. Сборка из исходного кода также дает вам возможность установить самую последнюю версию ROS 2.


<h2 align=center><a href="https://docs.ros.org/en/jazzy/Tutorials/Beginner-CLI-Tools/Configuring-ROS2-Environment.html">Настройка среды (Configuring environment)</a></h2>
<b>Background (Фон)</b>
<p>
В ROS 2 используется концепция объединения рабочих пространств с использованием среды shell. “Workspace (Рабочее пространство)” - это термин ROS, обозначающий место в вашей системе, где вы разрабатываете с помощью ROS 2. Основное рабочее пространство ROS 2 называется нижележащим (underlay). Последующие локальные рабочие области называются оверлеями (overlays). При разработке с использованием ROS 2, как правило, одновременно активируется несколько рабочих областей.
<p>
Объединение рабочих пространств упрощает разработку с использованием различных версий ROS 2 или различных наборов пакетов. Это также позволяет устанавливать несколько дистрибутивов ROS 2 (или “дистрибутивов”, например, Dashing и Eloquent) на один компьютер и переключаться между ними.
<p>
Это достигается путем поиска установочных файлов при каждом открытии новой оболочки или путем однократного добавления исходной команды в сценарий запуска оболочки. Без поиска установочных файлов вы не сможете получить доступ к командам ROS 2, а также найти или использовать пакеты ROS 2. Другими словами, вы не сможете использовать ROS 2.
<p>
<b>Prerequisites:</b>
<p>
Команды, используемые в этом руководстве, предполагают, что вы следовали руководству по установке бинарных пакетов для вашей операционной системы (пакеты Debian для Linux). Вы все еще можете следовать этому примеру, если вы создавали программу из исходного кода, но путь к вашим установочным файлам, скорее всего, будет другим. Вы также не сможете использовать команду:<br> <i>sudo apt install ros-&lt;distro&gt;-&lt;package&gt;</i><br> (часто используемую в руководствах для начинающих), если вы устанавливаете из исходного кода.
<p>
Вам нужно будет запускать эту команду в каждой новой оболочке, которую вы открываете, чтобы получить доступ к командам ROS 2, например, так:
<p>
<i># Replace ".bash" with your shell if you're not using bash<br>
# Possible values are: setup.bash, setup.sh, setup.zsh</i><br>
<b>source /opt/ros/jazzy/setup.bash</b>
<p>
Или чтобы не выполнять эту команду каждый раз при открытии терминала, записать её в ~/.bashrc:
<p>
<b>echo "source /opt/ros/jazzy/setup.bash" >> ~/.bashrc</b>
<p>
<b>Проверка переменных среды:</b><br>
При использовании установочных файлов ROS 2 (setup.bash) будут установлены несколько переменных среды, необходимых для работы с ROS 2. Если у вас возникнут проблемы с поиском или использованием пакетов ROS 2, убедитесь, что ваша среда настроена должным образом, используя следующую команду:
<p>
<b>printenv | grep -i ROS</b>
<p>
Должно быть:
<p><i>
ROS_VERSION=2<br>
ROS_PYTHON_VERSION=3<br>
ROS_DISTRO=jazzy</i>
<p>
<b>Другие переменные:</b><br>
<i>export ROS_DOMAIN_ID=&lt;your_domain_id&gt;</i><br>
Чтобы поддерживать эту настройку между сеансами shell, вы можете добавить команду в свой сценарий запуска shell:<br>
<i>echo "export ROS_DOMAIN_ID=<your_domain_id>" >> ~/.bashrc</i>
<p>
По умолчанию связь по протоколу ROS 2 не ограничивается локальным хостом. Переменная среды ROS_AUTOMATIC_DISCOVERY_RANGE позволяет ограничить диапазон обнаружения по протоколу ROS 2. Использование <b>ROS_AUTOMATIC_DISCOVERY_RANGE</b> полезно в определенных условиях, например, в классах, где несколько роботов могут публиковать сообщения в одной и той же теме, что приводит к странному поведению. Более подробную информацию смотрите в разделе Улучшенное динамическое обнаружение.
<p>
Если вы когда-нибудь столкнетесь с какими-либо проблемами при поиске или использовании пакетов с ROS 2, первое, что вам следует сделать, это проверить переменные среды и убедиться, что они установлены в соответствии с версией и дистрибутивом, которые вы хотели.
<p>
Чтобы увидеть список:
<p>
<b>ros2 node list</b> список нод<br>
ros2 topic list</b> список топиков<br>
ros2 service list</b> список служб<br>
ros2 action list</b> список действий

<h3>Actions</h3>
Первое бросающее в глаза отличие от ROS - это наличие actions (действий). Действия являются одним из видов коммуникации в ROS 2 и предназначены для выполнения долгосрочных задач. Они состоят из трех частей: цели, обратной связи и результата.
<img src="./images/ros2_action.png">
<p>
Второе отличие: если не ошибаюсь, не нужно вызывать мастера: >b>roscore</b>.
<p>
Другое отличие: для building пакета теперь используется команда <b>colcon</b> вместо catkin_make и в результате будут создаваться каталоги install, build и log. devel не будет.





<br><br><br><br><br><br><br><br><br></body></html>
