<html><head>
<style>
.menu {
  background-color: #333;
  position: fixed;
  top: 0;
  width: 100%;
  color: #f2f2f2;
  padding: 16px;
     } 
.menu a {
  color: #f2f2f2;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
  font-size: 17px;
} 
.content {
          padding: 16px;
          margin-top: 200px;
         }
</style>
</head><body>
<title>Создание виртуального робота</title>
<div class="menu">
<table width="100%"><tr>
<td width="10%">
<a href="#top">Начало</a>
<p>
<a href="#bottom">Конец</a></td>
<td width="25%"><font color="white">
docker run --rm -it rosurdf /bin/bash<br>
passwd<br>
/etc/init.d/ssh start
</font>
</td>
<td  width="35%"><font color="white">
Другой терминал:<br>
ssh -X root@172.17.0.2<br>
cd catkin_ws/src/myrobot_description<br>
roslaunch myrobot_description rviz.launch<br>
roslaunch myrobot_description gazebo.launch
</font>
</td>
<td>
<a href="kod.html">Код скриптов</a>
</td>
</tr></table>
</div>
<div class="content">
<h2 align=center><a name="top">Создание виртуального робота, начало в 12.09.2024</h2>
Мой робот будет представлять собой примерно газонокосилку, схематично это просто параллепипед и 4 колёса, плюс датчик, чтобы видеть деревья. Потом возможно нужно будеть добавить плату миникомпьютера, чтобы робот имел мозги, а не был просто радиоуправляемой игрушкой.
<p>
Ссылки: <a href="https://habr.com/ru/articles/467241/">Робот-тележка на ROS. Часть 4. Создаем симуляцию робота, используя редакторы rviz и gazebo</a><br>
<a href="https://github.com/AntonSHBK/mobile_robot_base_ros1/blob/main/docs/Ru.md">Простая имитационная модель мобильного робота в ROS и Gazebo</a>
<p>
Сначало используя опробированный набор команд, открываю контейнер docker, через F11-forvarding запускаю локальное выполнение симуляторов из удаленного докер-контейнера:<br>
docker run --rm -it rosurdf /bin/bash<br>
passwd<br>
/etc/init.d/ssh start<br>
Другой терминал: ssh -X root@172.17.0.2<br>
cd catkin_ws/src
<p>
Теперь создам пакет myrobot_description с зависимостями от urdf std_msgs rospy roscpp:<br>
<b>catkin_create_pkg myrobot_description urdf std_msgs rospy roscpp</b>
<p>
Была создана папка myrobot_description, в ней файлы: CMakeLists.txt, package.xml и каталоги: include и src.<br>
В myrobot_description создам каталоги: urdf, launch:<br>
<pre>mkdir urdf launch</pre>
Создам файлы: urdf/gazon.urdf и launch/gazebo.launch:
<pre>
touch urdf/gazon.urdf
touch launch/gazebo.launch</pre>
Теперь буду описывать своего робота в файле gazon.urdf
<pre>nano urdf/gazon.urdf</pre>
Код:
<pre>
&lt;?xml version="1.0"?&gt;
&lt;robot name="gazonchik"&gt;

   &lt;link name="base_link"&gt;
      &lt;visual&gt;
        &lt;geometry&gt;
          &lt;box size="0.6 0.4 0.1"/&gt;
        &lt;/geometry&gt;
     &lt;/visual&gt;
   &lt;/link&gt;

   &lt;link name="переднее правое колесо"&gt;
      &lt;visual&gt;
       &lt;geometry&gt;
         &lt;cylinder length="0.05" radius="0.06"/&gt;
       &lt;/geometry&gt;
      &lt;/visual&gt;
   &lt;/link&gt;
  
   &lt;link name="переднее левое колесо"&gt;
      &lt;visual&gt;
        &lt;geometry&gt;
          &lt;cylinder length="0.05" radius="0.06"/&gt;
        &lt;/geometry&gt;
      &lt;/visual&gt;
   &lt;/link&gt;

    &lt;link name="заднее левое колесо"&gt;
       &lt;visual&gt;
         &lt;geometry&gt;
           &lt;cylinder length="0.05" radius="0.06"/&gt;
         &lt;/geometry&gt;
       &lt;/visual&gt;
    &lt;/link&gt;

     &lt;link name="заднее правое колесо"&gt;
       &lt;visual&gt;
         &lt;geometry&gt;
           &lt;cylinder length="0.05" radius="0.06"/&gt;
         &lt;/geometry&gt;
       &lt;/visual&gt;
     &lt;/link&gt;

     &lt;joint name="переднее правое колесо к корпусу" type="continuous"&gt;
       &lt;parent link="base_link"/&gt;
       &lt;child link="переднее правое колесо"/&gt;
       &lt;origin xyz="0.25 0.2 -0.03"/&gt;
     &lt;/joint&gt;

     &lt;joint name="переднее левоее колесо к корпусу" type="continuous"&gt;
       &lt;parent link="base_link"/&gt;
       &lt;child link="переднее левое колесо"/&gt;
       &lt;origin xyz="0.25 -0.2 -0.03"/&gt;
     &lt;/joint&gt;

     &lt;joint name="заднее правое  колесо к корпусу" type="continuous"&gt;
       &lt;parent link="base_link"/&gt;
       &lt;child link="заднее правое колесо"/&gt;
       &lt;origin xyz="-0.25 0.2 -0.03"/&gt;
     &lt;/joint&gt;

     &lt;joint name="заднее левое  колесо к корпусу" type="continuous"&gt;
       &lt;parent link="base_link"/&gt;
       &lt;child link="заднее левое колесо"/&gt;
       &lt;origin xyz="-0.25 -0.2 -0.03"/&gt;
     &lt;/joint&gt;

 &lt;/robot&gt;
</pre>
Из <a href="https://habr.com/ru/articles/467241/">Робот-тележка на ROS. Часть 4. Создаем симуляцию робота, используя редакторы rviz и gazebo</a>:<br>
<i>Если посмотреть код детально, то можно выяснить, что это стандартный файл xml, состоящий из блоков:
<ul>
<li>— visual
<li>— collision
<li>— inertial
</ul>
Каждый блок описывает свою часть: visual — это внешность робота, не более, collision и inertial — это физика робота, как все будет взаимодействовать с внешним миром — столкновения, инерция.<br>
<b>joints</b> — элементы, которые помогают определить движение между частями робота (links). Так например, движение колеса (wheel) влияет на раму в целом (chasis).<br>
<b>origin xyz</b> — это первоначальное расположение объекта по осям x,y,z.
<p>
parent link и child link это соответственно родительская и дочерняя связи, что из чего растет.
Также примечательно наличие типов: type=«continuous», type=«fixed». Это определение того, что может вращаться, а что нет. Так колеса имеют тип continuous. А, например, batery_joint — fixed.<br>
Отступы в коде такого же глубоко смысла как в python, где нельзя мешать табы и пробелы, не несут. Но для рая перфекциониста и наглядности лучше их иметь.</i>
<p>
Теперь задача, запустить робота в rviz, чтобы посмотреть что я создал.
<p> 
<b>nano launch/rviz.launch</b>
<p>
Код:
<pre>
&lt;?xml version="1.0"?&gt;
&lt;launch&gt;
   &lt;param name="robot_description" command="cat '$(find rosbots_description)/urdf/gazon.urdf'"/&gt;
   &lt;!-- send fake joint values --&gt;
  &lt;node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher"&gt;
    &lt;param name="use_gui" value="False"/&gt;
  &lt;/node&gt;
   &lt;!-- Combine joint values --&gt;
  &lt;node name="robot_state_publisher" pkg="robot_state_publisher" type="state_publisher"/&gt;
   &lt;!-- Show in Rviz   --&gt;
  &lt;node name="rviz" pkg="rviz" type="rviz" /&gt; 
&lt;/launch&gt;</pre>
Поехали:<br>
<b>roslaunch myrobot_description rviz.launch</b>
<p>
<img src="./images/myrobot.png">
<p>
Поменял в строке &lt;param name="robot_description" command="cat '$(find rosbots_description)/urdf/gazon.urdf'"/&gt; rosbots_description на myrobot_description
<p>
Снова: roslaunch myrobot_description rviz.launch
<p>
<img src="./images/myrobot1.png">
<p>
<img src="./images/myrobot2.png">
<p>
Робота в симуляторе не видно, похоже отсутствует разрешение на выполнение gazon.urdf
<p>
<img src="./images/myrobot3.png">
<p>
Снова: roslaunch myrobot_description rviz.launch
<p>
<img src="./images/myrobot4.png">
<p>
Ничего не изменилось.
<p>
roscd robot_state_publisher
<p>
Посмотрел, ни в robot_state_publisher ни в внутренней папке test файла state_publisher нет.
<p>
<b>13.09.2024:</b><br>
Из <a href="https://habr.com/ru/articles/467241/">Робот-тележка на ROS. Часть 4. Создаем симуляцию робота, используя редакторы rviz и gazebo</a>:<br>
<i>robot_state_publisher служит для публикации состояния суставов и трансформаций.<br>
Сервис robot_state_publisher использует URDF, указанный параметром robot_description, и положения суставов из раздела joint_states для вычисления прямой кинематики робота.<br>
Сервис joint_state_publisher и joint_state_publisher_gui считывает параметр robot_description с сервера параметров, находит все нефиксированные соединения и публикует сообщение JointState со всеми определенными соединениями. В свою очередь joint_state_publisher_gui предоставляет графический интерфейс для изменения параметров соединения (вращения колёсами к примеру). Запускать нужно что-то одно, если запустить оба сервиса, то они будут между собой конфликтовать.<br>
Примечание: `joint_state_publisher_gui` не работает должным образом вместе с gazebo (нет возможности повлиять на соединения).
<p>
При первом запуске rviz после добавления робота в рабочую область рекомендуется сохранить конфигурацию запуска rviz в директорию rviz и изменить файл запуска:
<pre>
&lt;arg name="rvizconfig" default="$(find custom_ackermann_steering_controller_ros)/rviz/base.rviz"/&gt;
&lt;node name="rviz" pkg="rviz" type="rviz" args="-d $(arg rvizconfig)"/&gt;</pre>
Тем самым, при последующих запусках нам не придётся всё заново открывать и настраивать.</i>
<p>
Изменил rviz.launch:
<pre>
&lt;?xml version="1.0"?&gt;
&lt;launch&gt;
   &lt;param name="robot_description" command="cat '$(find myrobot_description)/urdf/gazon.urdf'"/&gt;
   &lt;!-- Запуск нод --&gt;
  &lt;node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher"&gt;
    &lt;param name="use_gui" value="False"/&gt;
  &lt;/node&gt;
  &lt;node 
    name="robot_state_publisher" 
    pkg="robot_state_publisher" 
    type="robot_state_publisher"&gt;
  &lt;/node&gt;
   &lt;!-- Show in Rviz   --&gt;
  &lt;node name="rviz" pkg="rviz" type="rviz" /&gt;
&lt;/launch&gt;</pre>
Конкретно в строке ноды robot_state_publisher type изменил с state_publisher на robot_state_publisher
<p>
<b>roslaunch myrobot_description rviz.launch</b>
<p>
<img src="./images/myrobot5.png">
<p>
На этот раз ноды запустились нормально, но в rviz опять нет моего робота. Поменял fixed frame с map на base_link, нажал на Add и добавил robotmodel, присвоил ему name gazon. И мой робот появился:
<p>
<img src="./images/myrobot6.png">
<p>
Сохранил конфиг, как gazon.rviz
<p>
Поторопился сохранить конфиг.<br>
В myrobot_description создал папку config.<br>
Отредактировал rviz.launch:
<pre>
&lt;?xml version="1.0"?&gt;
&lt;launch&gt;
   &lt;param name="robot_description" command="cat '$(find myrobot_description)/urdf/gazon.urdf'"/&gt;
   &lt;arg name="rvizconfig" default="$(find myrobot_description)/config/gazon.rviz"/&gt;  
 &lt;!-- Запуск нод --&gt;
  &lt;node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher"&gt;
    &lt;param name="use_gui" value="False"/&gt;
  &lt;/node&gt;
  &lt;node 
    name="robot_state_publisher" 
    pkg="robot_state_publisher" 
    type="robot_state_publisher"&gt;
  &lt;/node&gt;
   &lt;!-- Show in Rviz   --&gt;
  &lt;node name="rviz" pkg="rviz" type="rviz" args="-d $(arg rvizconfig)"/&gt; 
&lt;/launch&gt;</pre>
Запустил rviz.launch<br>
Сохранил конфиг в myrobot_description/config/gazon.rviz<br>
Теперь при запуске rviz.launch будет сразу открываться конфиг myrobot_description/config/gazon.rviz
<p>
<font color=red>Всё же непонятно, почему в пакетах joint_state_publisher и robot_state_publisher нет одноименных нод.</font>
<p>
Окончательный код gazon.urdf:
<pre>
&lt;?xml version="1.0"?&gt;
&lt;robot name="gazonchik"&gt;

   &lt;material name="black"&gt;
     &lt;color rgba="0 0 0 1"/&gt;
   &lt;/material&gt;

   &lt;material name="grey"&gt;
     &lt;color rgba="0.5 0.5 0.5 1"/&gt;
   &lt;/material&gt;

   &lt;link name="base_link"&gt;
      &lt;visual&gt;
        &lt;geometry&gt;
          &lt;box size="0.6 0.4 0.1"/&gt;
        &lt;/geometry&gt;
        &lt;material name="grey"/&gt;
      &lt;/visual&gt;
    &lt;/link&gt;

   &lt;link name="front_right_wheel"&gt;
      &lt;visual&gt;
       &lt;geometry&gt;
         &lt;cylinder length="0.05" radius="0.06"/&gt;
       &lt;/geometry&gt;
       &lt;origin rpy="1.57075 0 0" xyz="0 0 0"/&gt;
       &lt;material name="black"/&gt;
      &lt;/visual&gt;
   &lt;/link&gt;

   &lt;link name="front_left_wheel"&gt;
      &lt;visual&gt;
        &lt;geometry&gt;
          &lt;cylinder length="0.05" radius="0.06"/&gt;
        &lt;/geometry&gt;
        &lt;origin rpy="1.57075 0 0" xyz="0 0 0"/&gt;
       &lt;material name="black"/&gt;
      &lt;/visual&gt;
   &lt;/link&gt;
   
  &lt;link name="back_right_wheel"&gt;
       &lt;visual&gt;
         &lt;geometry&gt;
           &lt;cylinder length="0.05" radius="0.06"/&gt;
         &lt;/geometry&gt;
         &lt;origin rpy="1.57075 0 0" xyz="0 0 0"/&gt;
         &lt;material name="black"/&gt;
       &lt;/visual&gt;
     &lt;/link&gt;

     &lt;joint name="переднее правое колесо к корпусу" type="continuous"&gt;
       &lt;parent link="base_link"/&gt;
       &lt;child link="front_right_wheel"/&gt;
       &lt;origin xyz="0.3 -0.2 -0.05"/&gt;
     &lt;/joint&gt;

     &lt;joint name="переднее левое колесо к корпусу" type="continuous"&gt;
       &lt;parent link="base_link"/&gt;
       &lt;child link="front_left_wheel"/&gt;
       &lt;origin xyz="0.3 0.2 -0.05"/&gt;
     &lt;/joint&gt;

     &lt;joint name="заднее правое  колесо к корпусу" type="continuous"&gt;
       &lt;parent link="base_link"/&gt;
       &lt;child link="back_right_wheel"/&gt;
       &lt;origin xyz="-0.3 -0.2 -0.05"/&gt;
     &lt;/joint&gt;
     
     &lt;joint name="заднее левое  колесо к корпусу" type="continuous"&gt;
       &lt;parent link="base_link"/&gt;
       &lt;child link="back_left_wheel"/&gt;
       &lt;origin xyz="-0.3 0.2 -0.05"/&gt;
     &lt;/joint&gt;

 &lt;/robot&gt;</pre>
<img src="./images/myrobot7.png">
<p>
<ul>
<li> Ось красного цвета - это ось X, ось зеленого цвета - ось Y и ось синего цвета - Z.<br>
<li> Если link name, значение написать русскими буквами, то в rviz имя ссылок не будет выводиться.
<li> color rgba="0 0 0 1" - черный цвет, color rgba="0.5 0.5 0.5 1" - серый цвет, color rgba="1 1 1 1" - белый цвет<br>
color rgba="1.0 1.0 0.0 1.0" - желтый
</ul> 
В блок joint каждого колёса добавил строку &lt;axis xyz="0 0 1"/&gt;. Посмотрел в rviz, ни оси ни какого-то другого элемента не видно.
<p>
<b>16.09.2024: Запуск в gazebo</b>
<p>
nano launch/gazebo.launch
<p>
Код:
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;launch&gt;
    &lt;param name="robot_description" command="cat '$(find myrobot_description)/urdf/gazon.urdf'" /&gt;
 
    &lt;arg name="x" default="0"/&gt;
    &lt;arg name="y" default="0"/&gt;
    &lt;arg name="z" default="0.5"/&gt;
 
    &lt;node name="mybot_spawn" pkg="gazebo_ros" type="spawn_model" output="screen"
          args="-urdf -param robot_description -model gazonchik -x $(arg x) -y $(arg y) -z $(arg z)" /&gt;
&lt;/launch&gt;
</pre>
<i>Здесь мы также считываем модель, затем аргументами передаем ее расположение в пространстве по осям x,y,z. Далее запускаем всего лишь одну ноду — mybot_spawn из пакета gazebo_ros.</i>
<p>
Запустить газебо без робота:<br>
<b>roslaunch gazebo_ros empty_world.launch</b><br>
Открылся симулятор без робота.
<p>
В другом терминале выполняем команду запуска моего робота:<br>
<b>roslaunch myrobot_description gazebo.launch</b>
<p>
<img src="./images/myrobot8.png">
<p>
<pre>
Error Code 17 Msg: urdf2sdf: link[base_link] has no &lt;inertial&gt; block defined. Please ensure this
 link has a valid mass to prevent any missing links or joints in the resulting SDF model.
Warning [parser_urdf.cc:2755] Error Code 17 Msg: urdf2sdf: [4] child joints ignored.
Warning [parser_urdf.cc:2755] Error Code 17 Msg: urdf2sdf: [4] child links ignored.
Warning [parser_urdf.cc:2759] Error Code 17 Msg: urdf2sdf: link[base_link] is not modeled in sdf.
</pre>
Как минимум из-за того, что отсутствует тег inertial.
<p>
В urdf/gazon.urdf в блок base_link добавил:
<pre>
&lt;inertial&gt;
        &lt;origin xyz="0.0 0 0."/&gt;
        &lt;mass value="0.5"/&gt; 
        &lt;inertia ixx="0.01" ixy="0.0" ixz="0.0"
                 iyy="0.01" iyz="0.0" 
                 izz="0.03" /&gt;
      &lt;/inertial&gt;
</pre>
В launch/gazebo.launch в строке <i>args="-urdf -param robot_description -model gazonchik -x $(arg x) -y $(arg y) -z $(arg z)"</i> поменял gazonchik на gazonchik2 (была жалоба, что модель уже существует).
<p>
Снова: <b>roslaunch myrobot_description gazebo.launch</b>
<p>
<img src="./images/myrobot9.png">
<p>
На этот раз нет тега inertial в линках колёс.
<p>
В блок каждого колёса добавил:
<pre>
&lt;inertial&gt;
        &lt;mass value="0.4" /&gt;
        &lt;origin xyz="0 0 0" /&gt;
        &lt;inertia ixx="0.001" ixy="0.0" ixz="0.0"
                 iyy="0.001" iyz="0.0" 
                 izz="0.001" /&gt;
      &lt;/inertial&gt;
</pre>
Снова выпоняю:<br>
roslaunch gazebo_ros empty_world.launch<br>
roslaunch myrobot_description gazebo.launch
<p>
На этот раз вроде все нормально, но робот не открылся.
<p>
<img src="./images/myrobot10.png">
<p>
<font color=red>libcurl: (6) Could not resolve host: fuel.gazebosim.org</font>
<p>
В launch/gazebo.launch поменял gazonchik2 назад на gazonchik.
<p>
В общем внешне ничего не изменилось (не вижу своей модели), но в левой панели в списке models есть мой gazonchik и можно посмотреть его свойства (теги), какие я написал.<br>
<font color=red>Но почему не видать моего робота?</font>
<p>
<b>18.09.2024</b><br>
Изменил launch/gazebo.launch, добавил строку &lt;include file="$(find gazebo_ros)/launch/empty_world.launch"&gt;:
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;launch&gt;
    &lt;param name="robot_description" command="cat '$(find myrobot_description)/urdf/gazon.urdf'" /&gt;

    &lt;arg name="x" default="0"/&gt;
    &lt;arg name="y" default="0"/&gt;
    &lt;arg name="z" default="0.5"/&gt;

    &lt;include file="$(find gazebo_ros)/launch/empty_world.launch"&gt;

    &lt;node name="mybot_spawn" pkg="gazebo_ros" type="spawn_model" output="screen"
          args="-urdf -param robot_description -model gazonchik -x $(arg x) -y $(arg y) -z $(arg z)" /&gt;
&lt;/launch&gt;</pre>
Думаю теперь не надо запускать вначале газебо с пустым миром, а сразу моего gazonchik'а.
<p>
<b>roslaunch myrobot_description gazebo.launch</b>
<p>
<img src="./images/myrobot11.png">
<p>
Нашёл ошибку, не был закрыт тег include. Исправил, снова roslaunch myrobot_description gazebo.launch<br>
<font color=red>Не видать газонщика</font>, хотя в списке models есть.
<h3>19.09.2024</h3>
В urdf/gazon.urdf вне блока link добавил:
<pre>
&lt;gazebo reference ="base_link"&gt;
        &lt;material&gt;Gazebo/grey&lt;/material&gt;
     &lt;/gazebo&gt;
</pre>
Весь код:
<pre>
&lt;?xml version="1.0"?&gt;
&lt;robot name="gazonchik"&gt;

   &lt;material name="black"&gt;
     &lt;color rgba="0 0 0 1"/&gt;
   &lt;/material&gt;

   &lt;material name="grey"&gt;
     &lt;color rgba="0.5 0.5 0.5 1"/&gt;
   &lt;/material&gt;

   &lt;link name="base_link"&gt;
      &lt;visual&gt;
        &lt;geometry&gt;
          &lt;box size="0.6 0.4 0.1"/&gt;
        &lt;/geometry&gt;
        &lt;material name="grey"/&gt;
      &lt;/visual&gt;
      &lt;inertial&gt;
        &lt;origin xyz="0.0 0 0."/&gt;
        &lt;mass value="0.5"/&gt; 
        &lt;inertia ixx="0.01" ixy="0.0" ixz="0.0"
                 iyy="0.01" iyz="0.0" 
                 izz="0.03" /&gt;
      &lt;/inertial&gt;
    &lt;/link&gt;
    &lt;gazebo reference ="base_link"&gt;
        &lt;material&gt;Gazebo/grey&lt;/material&gt;
     &lt;/gazebo&gt;

   &lt;link name="front_right_wheel"&gt;
      &lt;visual&gt;
       &lt;geometry&gt;
         &lt;cylinder length="0.05" radius="0.06"/&gt;
       &lt;/geometry&gt;
       &lt;origin rpy="1.57075 0 0" xyz="0 0 0"/&gt;
       &lt;material name="black"/&gt;
      &lt;/visual&gt;
      &lt;inertial&gt;
        &lt;mass value="0.4" /&gt;
        &lt;origin xyz="0 0 0" /&gt;
        &lt;inertia ixx="0.001" ixy="0.0" ixz="0.0"
                 iyy="0.001" iyz="0.0" 
                 izz="0.001" /&gt;
      &lt;/inertial&gt;
   &lt;/link&gt;
   &lt;gazebo reference ="front_right_wheel"&gt;
        &lt;material&gt;Gazebo/black&lt;/material&gt;
     &lt;/gazebo&gt;
  
   &lt;link name="front_left_wheel"&gt;
      &lt;visual&gt;
        &lt;geometry&gt;
          &lt;cylinder length="0.05" radius="0.06"/&gt;
        &lt;/geometry&gt;
        &lt;origin rpy="1.57075 0 0" xyz="0 0 0"/&gt;
       &lt;material name="black"/&gt;
      &lt;/visual&gt;
      &lt;inertial&gt;
        &lt;mass value="0.4" /&gt;
        &lt;origin xyz="0 0 0" /&gt;
        &lt;inertia ixx="0.001" ixy="0.0" ixz="0.0"
                 iyy="0.001" iyz="0.0" 
                 izz="0.001" /&gt;
      &lt;/inertial&gt;
   &lt;/link&gt;
   &lt;gazebo reference ="front_left_wheel"&gt;
        &lt;material&gt;Gazebo/black&lt;/material&gt;
     &lt;/gazebo&gt;

    &lt;link name="back_left_wheel"&gt;
       &lt;visual&gt;
         &lt;geometry&gt;
           &lt;cylinder length="0.05" radius="0.06"/&gt;
         &lt;/geometry&gt;
         &lt;origin rpy="1.57075 0 0" xyz="0 0 0"/&gt;
         &lt;material name="black"/&gt;
       &lt;/visual&gt;
       &lt;inertial&gt;
        &lt;mass value="0.4" /&gt;
        &lt;origin xyz="0 0 0" /&gt;
        &lt;inertia ixx="0.001" ixy="0.0" ixz="0.0"
                 iyy="0.001" iyz="0.0" 
                 izz="0.001" /&gt;
      &lt;/inertial&gt;
    &lt;/link&gt;
    &lt;gazebo reference ="back_left_wheel"&gt;
        &lt;material&gt;Gazebo/black&lt;/material&gt;
     &lt;/gazebo&gt;

     &lt;link name="back_right_wheel"&gt;
       &lt;visual&gt;
         &lt;geometry&gt;
           &lt;cylinder length="0.05" radius="0.06"/&gt;
         &lt;/geometry&gt;
         &lt;origin rpy="1.57075 0 0" xyz="0 0 0"/&gt;
         &lt;material name="black"/&gt;
       &lt;/visual&gt;
       &lt;inertial&gt;
        &lt;mass value="0.4" /&gt;
        &lt;origin xyz="0 0 0" /&gt;
        &lt;inertia ixx="0.001" ixy="0.0" ixz="0.0"
                 iyy="0.001" iyz="0.0" 
                 izz="0.001" /&gt;
      &lt;/inertial&gt;
     &lt;/link&gt;
     &lt;gazebo reference ="back_right_wheel"&gt;
        &lt;material&gt;Gazebo/black&lt;/material&gt;
     &lt;/gazebo&gt;  
     &lt;joint name="переднее правое колесо к корпусу" type="revolute"&gt;
       &lt;parent link="base_link"/&gt;
       &lt;child link="front_right_wheel"/&gt;
       &lt;origin xyz="0.3 -0.2 -0.05"/&gt;
       &lt;axis xyz="0 0 1"/&gt;
       &lt;limit lower="-0.785" upper="0.785" effort="1000" velocity="1"/&gt;
     &lt;/joint&gt;

     &lt;joint name="переднее левое колесо к корпусу" type="revolute"&gt;
       &lt;parent link="base_link"/&gt;
       &lt;child link="front_left_wheel"/&gt;
       &lt;origin xyz="0.3 0.2 -0.05"/&gt;
       &lt;axis xyz="0 0 1"/&gt;
       &lt;limit lower="-0.785" upper="0.785" effort="1000" velocity="1"/&gt;
     &lt;/joint&gt;

     &lt;joint name="заднее правое  колесо к корпусу" type="continuous"&gt;
       &lt;parent link="base_link"/&gt;
       &lt;child link="back_right_wheel"/&gt;
       &lt;origin xyz="-0.3 -0.2 -0.05"/&gt;
       &lt;axis xyz="0 0 1"/&gt;
     &lt;/joint&gt;

     &lt;joint name="заднее левое  колесо к корпусу" type="continuous"&gt;
       &lt;parent link="base_link"/&gt;
       &lt;child link="back_left_wheel"/&gt;
       &lt;origin xyz="-0.3 0.2 -0.05"/&gt;
       &lt;axis xyz="0 0 1"/&gt;
     &lt;/joint&gt;

 &lt;/robot&gt;
</pre>
Проверил, ничего не изменилось в газебо. Добавим блок collision.
<pre>
&lt;collision&gt;
         &lt;geometry&gt;
            &lt;cylinder length="0.05" radius="0.06"/&gt;
         &lt;/geometry&gt;
&lt;/collision&gt;
</pre>
Наконец появился. Почему-то зарылся в землю. И цвета материалов нет.
<p>
<img src="./images/myrobot12.png">
<p>
<b>24.09.2024</b><br>
Редактирую urdf/gazon.urdf:<br>
1. Добавляю плагин:
<pre>
&lt;gazebo&gt;
   &lt;plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so"&gt;
      &lt;robotNamespace&gt;/&lt;/robotNamespace&gt;
   &lt;/plugin&gt;
&lt;/gazebo&gt;</pre>
2. Добавляю для каждого переднего колеса блок transmission (вне link):
<pre>
&lt;transmission name="front_right_wheel_trans"&gt;
       &lt;type&gt;transmission_interface/SimpleTransmission&lt;/type&gt;
       &lt;actuator name="front_right_motor"&gt;
          &lt;mechanicalReduction&gt;1&lt;/mechanicalReduction&gt;
          &lt;hardwareInterface&gt;hardware_interface/VelocityJointInterface&lt;/hardwareInterface&gt;
       &lt;/actuator&gt;
       &lt;joint name="front_right_wheel_to_base"&gt;
          &lt;hardwareInterface&gt;hardware_interface/VelocityJointInterface&lt;/hardwareInterface&gt;
       &lt;/joint&gt;
    &lt;/transmission&gt;
</pre>
и
<pre>
&lt;transmission name="front_left_wheel_trans"&gt;
       &lt;type&gt;transmission_interface/SimpleTransmission&lt;/type&gt;
       &lt;actuator name="front_left_motor"&gt;
          &lt;mechanicalReduction&gt;1&lt;/mechanicalReduction&gt;
          &lt;hardwareInterface&gt;hardware_interface/VelocityJointInterface&lt;/hardwareInterface&gt;
       &lt;/actuator&gt;
       &lt;joint name="front_left_wheel_to_base"&gt;
          &lt;hardwareInterface&gt;hardware_interface/VelocityJointInterface&lt;/hardwareInterface&gt;
       &lt;/joint&gt;
    &lt;/transmission&gt;
</pre>
Строку &lt;hardwareInterface&gt;hardware_interface/VelocityJointInterface&lt;/hardwareInterface&gt; вставил в блок actuator и joint.
3. Блок
<pre>
&lt;gazebo reference ="back_right_wheel"&gt;
   &lt;material&gt;Gazebo/black&lt;/material&gt;
&lt;/gazebo&gt; </pre>
каждого колеса поменял на:
<pre>
&lt;gazebo reference="back_right_wheel"&gt;
      &lt;mu1 value="200.0"/&gt;
      &lt;mu2 value="100.0"/&gt;
      &lt;kp value="10000000.0" /&gt;
      &lt;kd value="1.0" /&gt;
      &lt;material&gt;Gazebo/Black&lt;/material&gt;
&lt;/gazebo&gt;</pre>
Несмотря на то, что в руководстве сказано вставлять gazebo с material внутри link, у меня цвет колес был черный, когда наоборот этот блок был вставлен вне link.
<pre>roslaunch myrobot_description gazebo.launch</pre>
<img src="./images/myrobot13.png">
<p>
Насчёт сообщения красного цвета из <a href="https://github.com/AntonSHBK/mobile_robot_base_ros1/blob/main/docs/Ru.md">Простая имитационная модель мобильного робота в ROS и Gazebo</a> сказано следующее:<br>
<i>
Это сообщение указывает на отсутствие заданного коэффициента усиления (gain) для пропорционального элемента PID контроллера. Несмотря на то что такие сообщения об ошибках могут показаться значимыми, они часто не критичны для базовой симуляции и могут быть исправлены путём правильной настройки параметров PID. Для глубокого понимания и корректной настройки PID контроллеров рекомендуется ознакомиться с официальной документацией по PID, которая предоставляет подробные инструкции и рекомендации.
<br>В данной работе я не настраивал параметры pid контролеров. Поэтому соответствующая строка закомментирована (смотреть далее).
<pre>
&lt;!-- Load joint controller configuration from YAML file to parameter server --&gt;
&lt;rosparam file="$(arg joint_state)" command="load"/&gt;
&lt;!-- &lt;rosparam file="$(arg pid_controllers)" command="load"/&gt; --&gt;</pre>
Подробнее об устранении ошибки<br>
Для устранения ошибок, связанных с отсутствием настроек PID (Пропорционально-Интегрально-Дифференциального) контроллера в симуляции Gazebo, можно создать отдельный конфигурационный файл pid_params.yaml, который будет содержать необходимые коэффициенты усиления для каждого из суставов робота. Включение этого файла в launch файл обеспечивает загрузку и применение настроек PID при запуске симуляции.<br>
Настройки PID важны для точного управления поведением механических суставов робота в динамической среде. Пропорциональный коэффициент (P) помогает уменьшить разницу между текущим и желаемым положением, интегральный коэффициент (I) устраняет остаточную статическую ошибку, а дифференциальный коэффициент (D) предотвращает колебания и слишком резкие изменения в поведении системы.
<p>
Файл pid_params.yaml должен включать настройки PID для каждого активного сустава, участвующего в движении робота.
<br>Исходный код pid_params.yaml:
<pre>
gazebo_ros_control:
  pid_gains:
    front_left_wheel_joint: { p: 1.0, i: 0.01, d: 0.01 }
    front_right_wheel_joint: { p: 1.0, i: 0.01, d: 0.01 }
    back_left_wheel_joint: { p: 1.0, i: 0.01, d: 0.01 }
    back_right_wheel_joint: { p: 1.0, i: 0.01, d: 0.01 }
    
    camera_joint: { p: 1.0, i: 0.01, d: 0.01 }
</pre>
Если ваш робот ведет себя странно после настройки параметров PID, это может быть вызвано несколькими причинами:
<ol>
<li> Неправильные параметры PID: Ваши параметры могут быть неподходящими для вашей системы. Вам может потребоваться тщательно настроить эти параметры, чтобы обеспечить стабильное и плавное управление роботом. Это может включать в себя изменение значений параметров и проведение тестов для оценки их влияния на поведение робота.
<li> Отсутствие интегральной составляющей 𝐾𝑖: Нулевое значение для параметра 𝐾𝑖 означает, что интегральная составляющая отсутствует. В зависимости от динамики вашей системы, интегральная составляющая может быть важным элементом для компенсации системных ошибок и обеспечения точного управления.
<li> Проблемы с обратной связью: Возможно, ваша система обратной связи не настроена правильно или не работает корректно. Убедитесь, что обратная связь от колес и других сенсоров передается корректно и обрабатывается вашим контроллером.
<li> Неустойчивость системы: Некорректно настроенные параметры PID могут привести к неустойчивости системы, что проявляется в непредсказуемом поведении робота. Вам может потребоваться изменить параметры так, чтобы система оставалась устойчивой при различных условиях эксплуатации.
</ol>
Рекомендуется начать с более консервативных параметров PID (например, установить 𝐾𝑝 и 𝐾𝑑 на низкие значения) и постепенно увеличивать их, проводя тестирование после каждого изменения. Также важно иметь возможность откатить изменения в параметрах, если робот начнет вести себя нестабильно.<br>
Для активации и использования этого конфигурационного файла во время запуска проекта на ROS, файл должен быть загружен с использованием утилиты roslaunch. Это обеспечивает автоматическую интеграцию параметров контроллеров с вашими узлами ROS и активацию необходимых сервисов управления.
</i>
<p>
4. Создал файл config/gazon.yaml:
<pre>
myrobot:
  # Publish all joint states -----------------------------------
  joint_state_controller:
    type: joint_state_controller/JointStateController
    publish_rate: 50  

  # Position Controllers ---------------------------------------
  joint1_position_controller:
    type: effort_controllers/JointPositionController
    joint: joint1
    pid: {p: 100.0, i: 0.01, d: 10.0}
  joint2_position_controller:
    type: effort_controllers/JointPositionController
    joint: joint2
    pid: {p: 100.0, i: 0.01, d: 10.0}
</pre>
В launch/gazebo.launch добавил через rosparam config/gazon.yaml
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;launch&gt;
    &lt;!-- Load joint controller configurations from YAML file to parameter server --&gt;
    &lt;rosparam file="$(find myrobot_description)/config/gazon.yaml" command="load"/&gt;
    &lt;param name="robot_description" command="cat '$(find myrobot_description)/urdf/gazon.urdf'" /&gt;

    &lt;arg name="x" default="0"/&gt;
    &lt;arg name="y" default="0"/&gt;
    &lt;arg name="z" default="0.5"/&gt;

    &lt;include file="$(find gazebo_ros)/launch/empty_world.launch" /&gt;

    &lt;node name="mybot_spawn" pkg="gazebo_ros" type="spawn_model" output="screen"
          args="-urdf -param robot_description -model robot1 -x $(arg x) -y $(arg y) -z $(arg z)" /&gt;
&lt;/launch&gt;
</pre>
Вывод от команды roslaunch myrobot_description gazebo.launch:
<pre>
PARAMETERS
 * /gazebo/enable_ros_network: True
 * /myrobot/joint1_position_controller/joint: joint1
 * /myrobot/joint1_position_controller/pid/d: 10.0
 * /myrobot/joint1_position_controller/pid/i: 0.01
 * /myrobot/joint1_position_controller/pid/p: 100.0
 * /myrobot/joint1_position_controller/type: effort_controller...
 * /myrobot/joint2_position_controller/joint: joint2
 * /myrobot/joint2_position_controller/pid/d: 10.0
 * /myrobot/joint2_position_controller/pid/i: 0.01
 * /myrobot/joint2_position_controller/pid/p: 100.0
 * /myrobot/joint2_position_controller/type: effort_controller...
 * /myrobot/joint_state_controller/publish_rate: 50
 * /myrobot/joint_state_controller/type: joint_state_contr...
 * /robot_description: <?xml version="1....
 * /rosdistro: noetic
 * /rosversion: 1.16.0
 * /use_sim_time: True
</pre>
-------------------------------------------------------------------------------------------------------
<pre>
[ INFO] [1727174662.245701115, 0.001000000]: Loading gazebo_ros_control plugin
[ INFO] [1727174662.247041510, 0.001000000]: Starting gazebo_ros_control plugin in namespace: /
[ INFO] [1727174662.252189872, 0.001000000]: gazebo_ros_control plugin is waiting for model URDF
 in parameter [robot_description] on the ROS param server.
[ERROR] [1727174662.782787453, 0.001000000]: No p gain specified for pid.  Namespace: /gazebo_ros_control/pid_gains/front_right_wheel_to_base
[ERROR] [1727174662.811033643, 0.001000000]: No p gain specified for pid.  Namespace: /gazebo_ros_control/pid_gains/front_left_wheel_to_base
[mybot_spawn-4] process has finished cleanly
log file: /root/.ros/log/ebc6838e-7a61-11ef-9178-0242ac110002/mybot_spawn-4*.log
[ INFO] [1727174662.943671696, 0.001000000]: Loaded gazebo_ros_control.
</pre></pre>
5. В link корпуса внутри visual и  collision добавил &lt;origin xyz="0 0 0.06" rpy="0 0 0"/&gt;, а в колесе изменил origin xyz (z=0.06)<br>
Поднял робота над землей на радиус колёса.<br>
Робот в газебо теперь нормально стоит (колесами на земле), но в rviz центры осей на колесах находятся в нижней точке колес. Наверное в joint's надо изменить координаты origin.
<p>
В joint front_right_wheel сделал z=0, так нижняя точка колеса стала на уровне основания корпуса:<br>
<img src="./images/myrobot14.png">
<p>
Если в link колеса &lt;origin rpy="1.57075 0 0" xyz="0 0 <b>-0.06</b>"/&gt; вместо &lt;origin rpy="1.57075 0 0" xyz="0 0 0.06"/&gt;, то:
<br><img src="./images/myrobot15.png">
<p>
Теперь в link переднего правого колеса: &lt;origin rpy="1.57075 0 0" xyz="0 0 0.06"/&gt; - колесо относительно центра корпуса (находится в основании корпуса) подыму на 6 см.<br>
В joint переднего правого колеса: &lt;origin xyz="0.3 -0.2 <b>0</b>"/&gt; - z оси колеса будет совпадать с z корпуса
<br><img src="./images/myrobot16.png">
<p>
Окончательный вариант, и в joint и в link z=0
<br><img src="./images/myrobot17.png">
<pre>roslaunch myrobot_description gazebo.launch</pre>
Непонятно:
<br><img src="./images/myrobot18.png"><br>
Центр земли не совмещен с машиной и одно колесо почему-то крутилось.
<p>
<b>26.09.2024</b><br>
1. urdf/gazon.urdf в строке &lt;robotNamespace&gt;gazonchik&lt;/robotNamespace&gt; поменял / на gazonchik. Так в доке написано, внутри robotNamespace должно быть name из тега robot.<br>
config/gazon.yaml полностью меняю на <a href="https://github.com/AntonSHBK/mobile_robot_base_ros1/blob/main/config/robot_joint_state.yaml">конфигурационный файл Антона</a>. Только уберу контроллеры камеры и задних колес.
<p>
2. С помощью tmux разделил окно терминала на 2 панели.
<p>
roslaunch myrobot_description gazebo.launch
<p>
Отрывки сообщения:
<pre>
PARAMETERS                                                                     
 * /front_left_wheel_controller/joint: front_left_wheel_...                    
 * /front_left_wheel_controller/type: velocity_controll...                     
 * /front_right_wheel_controller/joint: front_right_wheel...                   
 * /front_right_wheel_controller/type: velocity_controll...                    
 * /gazebo/enable_ros_network: True                                            
 * /joint_state_controller/publish_rate: 50                          
 * /joint_state_controller/type: joint_state_contr...                
 * /robot_description: <?xml version="1....                          
 * /rosdistro: noetic                                                
 * /rosversion: 1.16.0                                               
 * /use_sim_time: True
 </pre>
<pre>
NODES                                                                                                                               
  /                                                                                                                                 
    gazebo (gazebo_ros/gzserver)                                                                                                    
    gazebo_gui (gazebo_ros/gzclient)                                                                                                
    mybot_spawn (gazebo_ros/spawn_model)
</pre>
<pre>
[INFO] [1727340678.929533, 0.001000]: Spawn status: SpawnModel: Successfully spawned entity
[mybot_spawn-4] process has finished cleanly
log file: /root/.ros/log/6be73b8e-7be4-11ef-9de7-0242ac110002/mybot_spawn-4*.log
[ INFO] [1727340680.487798272, 0.001000000]: Loading gazebo_ros_control plugin
[ INFO] [1727340680.489031071, 0.001000000]: Starting gazebo_ros_control plugin in namespace: gazonchik
[ INFO] [1727340680.491267213, 0.001000000]: gazebo_ros_control plugin is waiting for model URDF in parameter [/robot_description] o
n the ROS param server.
</pre>
В другой панели:<br>
rostopic list:
<pre>
/clock
/gazebo/link_states
/gazebo/model_states
/gazebo/parameter_descriptions
/gazebo/parameter_updates
/gazebo/performance_metrics
/gazebo/set_link_state
/gazebo/set_model_state
/rosout
/rosout_agg</pre>
3. <pre>rosrun rqt_graph rqt_graph</pre>
<img src="./images/myrobot19.png">
<p>
Непонятно, почему не видно ноды mybot_spawn (gazebo_ros/spawn_model) и некоторых топиков.
<p>
<b>27.09.2024</b><br>
Изменил config/gazon.yaml: правильно написал имена суставов.<br>
Также в launch/gazebo.launch добавил ноду rviz'а:
<pre>
&lt;!-- Запуск RViz --&gt;
    &lt;include file="$(find myrobot_description)/launch/rviz.launch"&gt;</pre>
roslaunch myrobot_description gazebo.launch
<p>
Изменился почему-то состав нод:
<pre>
NODES
  /
    gazebo (gazebo_ros/gzserver)
    gazebo_gui (gazebo_ros/gzclient)
    <b>joint_state_publisher (joint_state_publisher/joint_state_publisher)</b>
    mybot_spawn (gazebo_ros/spawn_model)
    <b>robot_state_publisher (robot_state_publisher/robot_state_publisher)</b>
    rviz (rviz/rviz)</pre>
<img src="./images/myrobot20.png">
<p>
rosrun rqt_graph rqt_graph
<p>
<img src="./images/myrobot21.png">
<pre>
rostopic list
/clicked_point
/clock
/gazebo/link_states
/gazebo/model_states
/gazebo/parameter_descriptions
/gazebo/parameter_updates
/gazebo/performance_metrics
/gazebo/set_link_state
/gazebo/set_model_state
/initialpose
/joint_states
/move_base_simple/goal
/rosout
/rosout_agg
/statistics
/tf
/tf_static</pre></pre>
<font color=red>Непонятно куда, в какой топик публиковать сообщение, чтобы повернуть колесо. И вообще как управлять роботом в газебо. Зачем писал конфигурационный файл контроллеров, зачем блок transmission, зачем плагин.</font><br>
В общем по новой изучать.

<p>
<b><a name="bottom">29.09.2024</b><br>
1. В urdf/gazon.urdf в блоке плагина строку &lt;robotNamespace&gt;gazonchik&lt;/robotNamespace&gt; поменял на &lt;robotNamespace&gt;/&lt;/robotNamespace&gt;<br>
2. В launch/gazebo.launch в блоке запуска ноды controller_manager/spawner поменял значение name на "myrobot_controllers_spawner"<br>
3. roslaunch myrobot_description gazebo.launch
<pre>
PARAMETERS                                                                                                                          
 * /front_left_wheel_controller/joint: front_left_wheel_...                                                                         
 * /front_left_wheel_controller/type: velocity_controll...                                                                          
 * /front_right_wheel_controller/joint: front_right_wheel...                                                                        
 * /front_right_wheel_controller/type: velocity_controll...                                                                         
 * /gazebo/enable_ros_network: True                                                                                                 
 * /joint_state_controller/publish_rate: 50                                                                                         
 * /joint_state_controller/type: joint_state_contr...                                                                               
 * /joint_state_publisher/use_gui: False                                                                                            
 * /robot_description: <?xml version="1....                                                                                         
 * /rosdistro: noetic                                                                                                               
 * /rosversion: 1.16.0                                                                                                              
 * /use_sim_time: True
</pre>
<pre> NODES                                                                                                                               
  /                                                                                                                                 
    gazebo (gazebo_ros/gzserver)
    gazebo_gui (gazebo_ros/gzclient)
    joint_state_publisher (joint_state_publisher/joint_state_publisher)
    mybot_spawn (gazebo_ros/spawn_model)
    myrobot_controllers_spawner (controller_manager/spawner)
    robot_state_publisher (robot_state_publisher/robot_state_publisher)
    rviz (rviz/rviz)
</pre>
....................
<pre>
[ INFO] [1727604115.821970022, 0.001000000]: Loading gazebo_ros_control plugin
[ INFO] [1727604115.826681119, 0.001000000]: Starting gazebo_ros_control plugin in namespace: /
[ INFO] [1727604115.839643793, 0.001000000]: gazebo_ros_control plugin is waiting for model URDF in parameter [robot_description] on
 the ROS param server.
[mybot_spawn-7] process has finished cleanly
log file: /root/.ros/log/ca5935de-7e49-11ef-84f1-0242ac110002/mybot_spawn-7*.log
[ERROR] [1727604116.351087502, 0.001000000]: No p gain specified for pid.  Namespace: /gazebo_ros_control/pid_gains/
front_right_wheel_to_base
[ERROR] [1727604116.364720464, 0.001000000]: No p gain specified for pid.  Namespace: /gazebo_ros_control/pid_gains/
front_left_wheel_to_base
[ INFO] [1727604116.480890043, 0.001000000]: Loaded gazebo_ros_control.
[INFO] [1727604116.537242, 0.013000]: Controller Spawner: Waiting for service controller_manager/switch_controller
[INFO] [1727604116.587729, 0.020000]: Controller Spawner: Waiting for service controller_manager/unload_controller
[INFO] [1727604116.650766, 0.048000]: Loading controller: joint_state_controller
[INFO] [1727604116.953764, 0.197000]: Loading controller: front_left_wheel_controller
[INFO] [1727604117.265973, 0.286000]: Loading controller: front_right_wheel_controller
[INFO] [1727604117.377571, 0.336000]: Controller Spawner: Loaded controllers: joint_state_controller,
 front_left_wheel_controller, front_right_wheel_controller
[INFO] [1727604117.428031, 0.357000]: Started controllers: joint_state_controller, front_left_wheel_controller, front_right_wheel_controller</pre>
</pre>
rostopic list
<pre>
/clicked_point
/clock
/front_left_wheel_controller/command
/front_right_wheel_controller/command
/gazebo/link_states
/gazebo/model_states
/gazebo/parameter_descriptions
/gazebo/parameter_updates
/gazebo/performance_metrics
/gazebo/set_link_state
/gazebo/set_model_state
/initialpose
/joint_states
/move_base_simple/goal
/rosout
/rosout_agg
/tf
/tf_static
</pre>
<img src="./images/myrobot22.png">
<p>
rostopic type /front_left_wheel_controller/command
<pre>std_msgs/Float64</pre>
roslaunch myrobot_description gazebo.launch<br>
rostopic pub /front_left_wheel_controller/command std_msgs/Float64 "data: 2.3"<br>
Колесо дергалось, но не крутилось.
<p>
Поменял в urdf/gazon.urdf joint type с revolute на continuous.<br>
Снова roslaunch myrobot_description gazebo.launch<br>
Список топиков не поменялся как и тип сообщений к /front_left_wheel_controller/command.<br>
rostopic pub /front_left_wheel_controller/command std_msgs/Float64 "data: 3.2"<br>
<font color=red>В результате левое колесо стало крутиться не по оси Y, а помоему по оси Z.</font>
<p>
Так и есть, axis был равен 0 0 1. Поправил на 0 1 0<br>
rostopic pub /front_left_wheel_controller/command std_msgs/Float64 "data: 2.3"<br>
Теперь поехал, когда на оба топика отправил сообщения, но боком. Надо подправить оси задних колес.
<p>
rostopic pub /front_left_wheel_controller/command std_msgs/Float64 "data: 2.3"<br>
rostopic pub /front_right_wheel_controller/command std_msgs/Float64 "data: 2.3"<br>
Теперь робот поехал правильно, прямо вдоль оси X. Единственное, что не понравилось, что задние колеса не крутились, как будто волоком их тащили.<p>
<font color=green><b>Наверное на этом создание робота закончим.</b></font>

<br><br><br><br>
</div>
</body></html>
