<html><head></head><body>
<title>ROS для среднего уровня знаний</title>
<h2 align="center">Создание пакетов ros вручную</h2>
Ссылки: <a href="https://wiki.ros.org/ROS/Tutorials/Creating%20a%20Package%20by%20Hand">Creating a ROS package by hand.</a>
<p>
Существует инструмент для создания ROS-пакетов (catkin_create_pkg), но, как вы увидите, на самом деле здесь нет ничего сложного. catkin_create_pkg предотвращает ошибки и экономит усилия, но пакеты - это всего лишь каталог и простой XML-файл.
<p>
    Теперь мы создадим новый пакет <b>foobar</b>. В этом руководстве предполагается, что мы работаем с вашим рабочим пространством catkin и что поиск установочного файла уже выполнен.
<p>
В каталоге catkin_ws:<br>
<b>mkdir -p src/foobar<br>
cd src/foobar</b>
<p>
В данный момент src/foobar пустой. Самое первое, что мы сделаем, это добавим наш файл манифеста. Файл package.xml позволяет таким инструментам, как rospack, определять информацию о том, от чего зависит ваш пакет.<br>
<b>nano src/foobar/package.xml</b><br>
Внутри foobar/package.xml поместите следующее:<br>
<img src="./images/package.xml1.png">
<p>
Теперь, когда у вашего пакета есть манифест, ROS может найти его. Попробуйте выполнить команду:<br>
<b>rospack find foobar</b><br>
Если все верно, то выдаст путь к пакету.<br>
Обратите внимание, что этот пакет теперь также имеет зависимости от roscpp и std_msgs. Такие зависимости используются catkin для настройки пакетов в правильном порядке.
<p>
Теперь нам нужен файл CMakeLists.txt, чтобы catkin_make, который использует CMake для большей гибкости при сборке на нескольких платформах, собрал пакет.<br>
В данный момент его нет. Создадим и редактируем в моём любимом редакторе из каталога catkin_ws:<br>
<b>nano src/foobar/CMakeLists.txt</b><br>
<pre>
cmake_minimum_required(VERSION 2.8.3)
project(foobar)
find_package(catkin REQUIRED roscpp std_msgs)
catkin_package()
</pre>
<p>
Это все, что вам нужно, чтобы начать создавать пакет в ROS с помощью catkin. Конечно, если вы хотите, чтобы он действительно начал что-то создавать, вам нужно будет изучить еще пару макросов CMake. Дополнительную информацию смотрите в нашем руководстве <a href="https://wiki.ros.org/CMakeLists">CMakeLists.txt</a>. Также всегда возвращайтесь к руководству для начинающих (<a href="https://wiki.ros.org/ROS/Tutorials/CreatingPackage">создание пакета</a> и т.д.), чтобы настроить свои package.xml и CMakeLists.txt.
<h2 align=center>Управление системными зависимостями</h2>
Ссылки: <a href="https://wiki.ros.org/ROS/Tutorials/rosdep">Managing System dependencies</a>
<p>
Пакетам ROS иногда требуются внешние библиотеки и инструменты, которые должны предоставляться операционной системой. Эти необходимые библиотеки и инструменты обычно называются <b>системными зависимостями</b>. В некоторых случаях эти системные зависимости не устанавливаются по умолчанию. ROS предоставляет простой инструмент rosdep, который используется для загрузки и установки системных зависимостей.
<p>
Пакеты ROS должны указывать, что им нужны эти системные зависимости, в манифесте пакета. Давайте посмотрим на манифест для пакета turtlesim:
<br>
Сначало:<br>
<b>roscd turtlesim<br>
cat package.xml</b><br>
<img src="./images/package.xml2.png">
<p>
Внутри тегов build_depend можно видеть требуемые библиотеки пакеты для ноды (пакета) turtlesim.
<p>
<b>rosdep</b> - это инструмент, который вы можете использовать для установки системных зависимостей, требуемых пакетами ROS.<br>
Общий синтаксис:<br>
<font color=green>rosdep install [package]</font>
<p>
Загрузим и установим системные зависимости для turtlesim:<br>
<b>rosdep install turtlesim</b><br>
<img src="./images/rosdep_install.png">
<p>
Хотя rosdep является клиентским инструментом, ссылка предоставляется правилами rosdep, которые хранятся онлайн в ros/rosdistro/rosdep на github.
<p>
Когда выполняем:<br>
<b>rosdep update</b>
<br>rosdep фактически извлекает правила из репозитория rosdistro на github.<br>
начиная с версии 0.14.0, обновление rosdep будет извлекать имена пакетов ROS только для дистрибутивов ROS, отличных от EOL. Если вы все еще используете дистрибутив EOL ROS (чего, вероятно, не следует делать), вы можете передать аргумент --include-eol-distros, чтобы также получить имена этих пакетов ROS.
<p>
Эти правила используются, когда в списке указана зависимость, которая не соответствует имени пакета ROS, созданного в buildfarm. Затем rosdep проверяет, существует ли правило для ее устранения для соответствующей платформы и используемого менеджера пакетов.
<p>
При создании нового пакета вам может потребоваться объявить новые системные зависимости в соответствии с правилами rosdep, если их там еще нет. Просто отредактируйте файл, добавьте необходимую зависимость (строго в алфавитном порядке и по структуре, аналогичной другим уже зарегистрированным зависимостям) и отправьте запрос на извлечение.
<p>
После того, как этот запрос на извлечение был объединен, вам нужно запустить :<br>
<b>rosdep update</b><br>
и теперь эта зависимость будет устранена rosdep.
<p>
Можно протестировать это:<br>
<b>rosdep resolve my_dependency_name</b>




<br><br><br><br><br><br><br><br><br><br><br></bbody></html>
