<html><head></head><body>
<title></title>
<h2>Команды для работы с файлами</h2>
<h3>Поиск</h3>
<b>Команда locate</b><br>
Первая команда поиска файлов в Linux, которую мы рассмотрим, называется locate. Она осуществляет быстрый поиск по имени в специальной базе данных и выводит все имена, совпадающие с заданной подстрокой. Например, мы хотим найти все программы, начинающиеся с «zip». Так как будем искать именно программы, логично предположить, что имя директории заканчивается на «bin». Учитывая все это, попробуем найти нужные файлы:<br>
<b>locate bin/zip</b><br>
locate осуществил поиск в базе данных путевых имен и вывел все имена, содержащие подстроку «bin/zip».
<p>
При более сложных критериях поиска можно комбинировать locate с другими программами, например grep:
<p>
<b>locate bin | grep zip</b>
<p>
Иногда возникают ситуации, когда в Linux поиск по названию файла с помощью locate работает некорректно (вывод имен удаленных файлов, отсутствие имен недавно созданных файлов). В таком случае нужно обновить базу данных индексов:
<p>
<b>sudo updatedb</b>

<h3>Команда find</h3>
find является основным инструментов для поиска файлов в Linux через консоль. В отличие от locate, find позволяет находить файлы не только по имени, но и по другим разнообразным критериям: по размеру, дате создания, по правам и т.п.
<p>
В простом случае в качестве аргумента передается имя директории. find осуществляет поиск файла в каталоге Linux, который мы указали, а также во всех подкаталогах. Без указания опций, команда выводит список всех файлов. Например, для получения всех имен в домашней директории можно использовать такую команду:
<p>    
<b>find ~</b>
<p>
Вывод будет очень большим, так как find напечатает все имена в указанном каталоге и подкаталогов. Чтобы сделать поиск более конкретным, используются специальный опции, позволяющие задать критерии.
<p>
<b>Критерии поиска:</b><br>
Допустим, нам нужно вывести файлы, являющиеся только каталогами. Опция -type позволяет задать тип:
<p>
<b>find ~/playground/ -type d</b
<b><pre>
/home/gendo/playground/
/home/gendo/playground/bash
/home/gendo/playground/alis
/home/gendo/playground/test
/home/gendo/playground/ubuntussh
/home/gendo/playground/src
/home/gendo/playground/src/diction-1.11
/home/gendo/playground/src/diction-1.11/test
</pre></b>
Данная команда вывела все подкаталоги в директории ~/playground. Поддерживается поиск по следующим типам:
<ul>
<li> b — блочное устройство.
<li> с — символьное устройство.
<li> d — директория.
<li> f — регулярный файл.
<li> l — символическая ссылка.
</ul>
Мы также можем искать по размеру и имени, добавив дополнительные критерии. Попробуем найти регулярные файлы, совпадающие с шаблоном «.png» и имеющие размер более одного килобайта:
<p>
<b>find ~ -type f -name "*.png" -size +1k</b>
<p>  
Опция -name позволяет указать имя. В приведенном примере используется wildcard-шаблон, поэтому он заключен в кавычки. Параметр -size ограничивает поиск по размеру. Знак + перед числом означает, что мы ищем файлы больше указанного размера, минус — меньше указанного размера. В случае отсутствия знака find выведет все файлы, точно совпадающие с заданным размером.
<p>
Символы, позволяющие указать размер:
<ul>
<li> b — 512-байтовые блоки. Используется по умолчанию, когда после числа отсутствует символ.
<li> с — байты.
<li> w — 2-байтовые слова.
<li> k — килобайты.
<li> M — мегабайты.
<li> G — гигабайты.
</ul>
find поддерживает огромное число проверок, позволяющие выполнить поиск файла в директории Linux по разным критериям. Все их можно посмотреть в документации. 
<p>
Операторы
Из-за весомого количества критериев поиска, у нас возникает необходимость более точно описывать логические отношения между проверками. Например, нужно определить наличие ненадежных прав. Иными словам, надо вывести все файлы с правами не 0600 и все директории с правами не 0700. find предоставляет специальные логические операторы для комбинирования проверок такого рода:
<p>    
find ~ \( -type f -not -perm 0600 \) -or \( -type d -not -perm 0700 \)
<p>
Поддерживаются следующие логические операторы:
<ul>
<li> -and / -a —логическое И. Если не указаны операторы между несколькими проверками, подразумевается по умолчанию.
<li> -or / -o — логическое ИЛИ.
<li> -not / ! — логическое НЕ.
<li> ( ) — позволяет объединять проверки и операторы для создания сложных выражений. Необходимо экранировать.
</ul>
Предопределенные действия<br>
В Linux поиск файла с помощью find можно объединить с некоторыми действиями над полученными файлами. Существует предопределенные и пользовательские действия. Для первого вида find предоставляет следующие опции:
<ul>
<li> -delete — удаление найденных файлов.
<li> -ls — эквивалентно ls -dils.
<li> -print — вывод полного имя файла. Действие по умолчанию.
<li> -quit — завершение работы после первого совпадения по критериям.
</ul>
Предположим, нам необходимо удалить все имена с суффиксом «.bak». Конечно, можно сразу использовать find с опцией -delete, но для безопасности лучше просто вывести список удаляемых файлов, а уже потом их удалить:
<p>   
find ~ -type f -name '*.bak' -print
<p>  
После проверки удаляем:
<p>    
find ~ -type f -name '.bak' -delete
<p>  
Пользовательские действия<br>
Поиск файлов в консоли с помощью find можно комбинировать со всевозможными утилитами с помощью пользовательских действий:
<p>    
-exec command ‘{}’ ‘;’
<p>  
Здесь, command — название команды, {} — символьное представление текущего путевого имени, ; — разделитель команд. Например, мы можем применить команду ls -l для каждого найденного файла:
<p>    
find ~ -type f -name 'foo*' -exec ls -l '{}' ';'
<p>
-rw-rw-r-- 1 gendo gendo 0 Sep 30 09:59 /fooD<br>
-rw-rw-r-- 1 gendo gendo 0 Sep 30 09:59 /fooB<br>
-rw-rw-r-- 1 gendo gendo 0 Sep 30 09:59 /fooA<br>
-rw-rw-r-- 1 gendo gendo 0 Sep 30 09:59 /fooC<br>
<p>  
Иногда команды могут принимать сразу несколько аргументов, например, rm. Чтобы не применять команду к каждому найденному имени, в конце -exec ставится символ + вместо разделителя:
<p>    
find ~ -type f -name 'foo*' -exec ls -l '{}' +
<p>
-rw-rw-r-- 1 gendo gendo 0 Sep 30 09:59 /fooD<br>
-rw-rw-r-- 1 gendo gendo 0 Sep 30 09:59 /fooB<br>
-rw-rw-r-- 1 gendo gendo 0 Sep 30 09:59 /fooA<br>
-rw-rw-r-- 1 gendo gendo 0 Sep 30 09:59 /fooC<br>
<p>  
Аналогичное действие можно сделать при помощи утилиты xargs. Она принимает на вход список аргументов и на основе их формирует команды. В качестве примера приведем известную команду для вывода файлов, содержащих в имени «неудобные» символы (пробелы, переводы строк и т.п.):
<p>    
find ~ -iname '*.jpg' -print0 | xargs --null ls -l
<p>  
Аргумент -print0 заставляет разделять найденные имена нулевым символом (единственный символ, запрещенный в именах файлов). Опция -null в xargs указывает, что на вход подается список аргументов, разделенных нулевым символов.
<p>
Заключение<br>
В Linux поиск файла по имени осуществляется с помощью команд locate и find. Конечно, для этих целей можно использовать файловые менеджеры с привычным графическим интерфейсом. Однако рассмотренные утилиты помогают сделать процесс поиска более гибким и эффективным.

<h3>Удаление файла</h3>
<font color=green>rm</font>



<br><br><br><br><br><br><br><br></body></html>
